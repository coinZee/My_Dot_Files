;==========================================================
;
;   Polybar config (v2)
;   - Uses JetBrainsMono Nerd Font for icons
;   - Dynamic network modules (hide when disconnected)
;   - Icon-based battery status
;
;==========================================================

;----------------------------------------------------------
;   1. DEFINE COLORS (Unchanged)
;----------------------------------------------------------
[colors]
; Bar/text colors
background = #1e1e2e
foreground = #dddddd
sep = #666666

; Status colors
good = #eceff4
bad = #E78284
degraded = #cad3f5

; Workspace colors
ws-focused-bg = #4c566a
ws-focused-border = #748cc2
ws-focused-fg = #ffffff
ws-active-bg = #1e1e2e
ws-active-border = #5f676a
ws-active-fg = #ffffff
ws-inactive-bg = #333333
ws-inactive-border = #222222
ws-inactive-fg = #888888
ws-urgent-bg = #2f343a
ws-urgent-border = #900000
ws-urgent-fg = #ffffff


;----------------------------------------------------------
;   2. CONFIGURE THE BAR
;----------------------------------------------------------
[bar/main]
; --- Position ---
width = 100%
height = 28
position = top

; --- Background/Foreground ---
background = ${colors.background}
foreground = ${colors.foreground}

; --- [CHANGED] Fonts ---
; We now primarily use the Nerd Font.
; font-0 is for text
; font-1 is for icons (Nerd Font glyphs)
; You may need to adjust the font size (e.g., size=11 or size=12)
font-0 = "JetBrainsMono Nerd Font:style=Bold:size=11"
font-1 = "JetBrainsMono Nerd Font:pixelsize=13:style=Regular"


; --- [CHANGED] Modules ---
; Tray is still on the left.
; Separators are now built into the modules.
modules-left = i3 tray
modules-right = wireless ethernet battery memory date

; --- Tray Config (Unchanged) ---
; tray-position = center
; tray-background = ${colors.background}
; tray-padding = 2

; --- Separators (Unchanged) ---
separator = " | "


;----------------------------------------------------------
;   3. DEFINE MODULES
;----------------------------------------------------------

; --- i3 Workspaces (Unchanged) ---
[module/i3]
type = internal/i3
pin-workspaces = true
strip-wsnumbers = true
format = <label-state>
label-mode = %mode%
label-mode-padding = 1
label-mode-background = ${colors.bad}
label-focused = %name%
label-focused-background = ${colors.ws-focused-bg}
label-focused-foreground = ${colors.ws-focused-fg}
label-focused-padding = 2
label-focused-border-size = 2
label-focused-border-color = ${colors.ws-focused-border}
label-unfocused = %name%
label-unfocused-background = ${colors.ws-active-bg}
label-unfocused-foreground = ${colors.ws-active-fg}
label-unfocused-padding = 2
label-unfocused-border-size = 2
label-unfocused-border-color = ${colors.ws-active-border}
label-visible = %name%
label-visible-background = ${colors.ws-inactive-bg}
label-visible-foreground = ${colors.ws-inactive-fg}
label-visible-padding = 2
label-visible-border-size = 2
label-visible-border-color = ${colors.ws-inactive-border}
label-urgent = %name%
label-urgent-background = ${colors.ws-urgent-bg}
label-urgent-foreground = ${colors.ws-urgent-fg}
label-urgent-padding = 2
label-urgent-border-size = 2
label-urgent-border-color = ${colors.ws-urgent-border}


; --- [CHANGED] Wireless Network ---
[module/wireless]
type = internal/network
; *** IMPORTANT ***
; Change 'wlan0' to your wireless interface name
; Run 'ip link' to find it (e.g., wlp2s0)
interface = wlan0

format-connected = <label-connected>
format-disconnected = <label-disconnected>

; Nerd Font icon for WiFi: 
; We add the '•' separator at the end.
label-connected =   %essid% 
label-connected-foreground = ${colors.good}

; This is the magic: show *nothing* if disconnected.
label-disconnected = ""

; --- [CHANGED] Wired Network ---
[module/ethernet]
type = internal/network
; *** IMPORTANT ***
; Change 'eth0' to your wired interface name
; Run 'ip link' to find it (e.g., enp0s31f6)
interface = eth0

format-connected = <label-connected>
format-disconnected = <label-disconnected>

; Nerd Font icon for Ethernet: Ethernet
; We add the '•' separator at the end.
label-connected = Ethernet %linkspeed% 
label-connected-foreground = ${colors.good}

; Show *nothing* if disconnected.
label-disconnected = ""

; --- [CHANGED] Battery ---
[module/battery]
type = internal/battery
; *** IMPORTANT ***
; You may need to change BAT0
; Run 'ls /sys/class/power_supply/' to check
battery = BAT0
adapter = AC

; --- Charging State ---
; Nerd Font icon for charging: 
format-charging = <label-charging>
label-charging =  %percentage%% 
label-charging-foreground = ${colors.good}

; --- Discharging State ---
; We use an icon ramp for discharging
format-discharging = <ramp-capacity> <label-discharging>
label-discharging = %percentage%% 
; Set color for low battery (ramp-capacity-0)
ramp-capacity-0 = 
ramp-capacity-0-foreground = ${colors.bad}
ramp-capacity-1 = 
ramp-capacity-2 = 
ramp-capacity-3 = 
ramp-capacity-4 = 

; --- Full State ---
; Nerd Font icon for full: 
format-full = <label-full>
label-full =  %percentage%% 
label-full-foreground = ${colors.good}


; --- [CHANGED] Memory ---
[module/memory]
type = internal/memory
interval = 10

; Nerd Font icon for memory: 
format = <label> 
label =  %gb_used% | %gb_free%

format-warn = <label-warn> 
label-warn =  MEMORY < %gb_free%
label-warn-foreground = ${colors.degraded}
warn-percentage = 90


; --- [CHANGED] Date / Time ---
[module/date]
type = internal/date
interval = 1

; Nerd Font icon for calendar: 
; This is the last module, so NO '•' separator at the end
date = %Y-%m-%d | %H:%M:%S
label =  %date%


;----------------------------------------------------------
;   TRAY MODULE
;----------------------------------------------------------
[module/tray]
type = internal/tray

; This padding will be applied to the left of the tray
; to separate it from your workspaces
padding-left = 4
tray-size = 22
tray-padding = 4
